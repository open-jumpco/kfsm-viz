<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="610px" preserveAspectRatio="none" style="width:1553px;height:610px;background:#FFFFFF;" version="1.1" viewBox="0 0 1553 610" width="1553px" zoomAndPan="magnify"><defs><filter height="300%" id="f2buocnyorn43" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F8F8F8" filter="url(#f2buocnyorn43)" height="591.6094" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="1534.3188" x="7" y="7"/><rect fill="#FFFFFF" height="558" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="1528.3188" x="10" y="37.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="7" x2="1541.3188" y1="34.6094" y2="34.6094"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="129" x="709.6594" y="26.5332">PacketReaderFSM</text><ellipse cx="377.3198" cy="55.6094" fill="#000000" filter="url(#f2buocnyorn43)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><g id="PacketReaderFSM.RCVPCKT"><rect fill="#F8F8F8" filter="url(#f2buocnyorn43)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="86" x="334.3198" y="119.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="334.3198" x2="420.3198" y1="147.2188" y2="147.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="66" x="344.3198" y="139.1426">RCVPCKT</text></g><g id="PacketReaderFSM.RCVDATA"><rect fill="#F8F8F8" filter="url(#f2buocnyorn43)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="85" x="45.8198" y="263.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="45.8198" x2="130.8198" y1="291.2188" y2="291.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="65" x="55.8198" y="283.1426">RCVDATA</text></g><g id="PacketReaderFSM.RCVCHK"><rect fill="#F8F8F8" filter="url(#f2buocnyorn43)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="79" x="682.8198" y="263.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="682.8198" x2="761.8198" y1="291.2188" y2="291.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59" x="692.8198" y="283.1426">RCVCHK</text></g><g id="PacketReaderFSM.RCVESC"><rect fill="#F8F8F8" filter="url(#f2buocnyorn43)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="77" x="49.8198" y="424.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="49.8198" x2="126.8198" y1="452.2188" y2="452.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="57" x="59.8198" y="444.1426">RCVESC</text></g><g id="PacketReaderFSM.RCVCHKESC"><rect fill="#F8F8F8" filter="url(#f2buocnyorn43)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="107" x="557.8198" y="424.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="557.8198" x2="664.8198" y1="452.2188" y2="452.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87" x="567.8198" y="444.1426">RCVCHKESC</text></g><g id="PacketReaderFSM.CHKSUM"><rect fill="#F8F8F8" filter="url(#f2buocnyorn43)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="82" x="1100.3188" y="424.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="1100.3188" x2="1182.3188" y1="452.2188" y2="452.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="62" x="1110.3188" y="444.1426">CHKSUM</text></g><ellipse cx="1141.3188" cy="572.6094" filter="url(#f2buocnyorn43)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;fill:none;"/><ellipse cx="1141.8188" cy="573.1094" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><!--MD5=[d5e19be9775b48f87b777a3a7c2ace4f]
link *start*PacketReaderFSM to RCVPCKT--><path d="M377.3198,65.9204 C377.3198,77.3614 377.3198,97.3264 377.3198,114.1514 " fill="none" id="*start*PacketReaderFSM-to-RCVPCKT" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="377.3198,119.2594,381.3198,110.2594,377.3198,114.2594,373.3198,110.2594,377.3198,119.2594" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="280" x="378.3198" y="97.6792">CTRL [it == CharacterConstants.SOH]</text><!--MD5=[223b5a4b9e3f449b8f8ae37661901ac5]
link RCVPCKT to RCVDATA--><path d="M334.0568,147.7384 C246.0828,152.5114 52.9618,165.4234 33.3198,187.6094 C18,204.9134 23.7563,218.5694 33.3198,239.6094 C36.7508,247.1574 42.0201,253.9824 47.964,259.9614 " fill="none" id="RCVPCKT-to-RCVDATA" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="51.7418,263.5734,48.0005,254.4628,48.1277,260.1182,42.4722,260.2454,51.7418,263.5734" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="320" x="34.3198" y="201.6792">CTRL [it == CharacterConstants.STX] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="80" x="50.3198" y="218.6528">addField()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="34.3198" y="235.6265">}</text><!--MD5=[8faa5056d0c6829674e5759c682e3918]
link RCVPCKT to RCVCHK--><path d="M420.5908,145.2964 C499.0408,145.6604 660.3478,150.9814 700.3198,187.6094 C719.4898,205.1764 723.9358,235.3164 724.2248,257.9254 " fill="none" id="RCVPCKT-to-RCVCHK" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="724.2198,263.2074,728.2198,254.2074,724.2198,258.2074,720.2198,254.2074,724.2198,263.2074" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="724.3198" y="201.6792">BYTE -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="740.3198" y="218.6528">addChecksum(it)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="724.3198" y="235.6265">}</text><!--MD5=[e6aec3718703e49bd175761eb2d8125e]
link RCVDATA to RCVDATA--><path d="M131.0028,274.9794 C141.2368,276.0444 148.8198,280.5884 148.8198,288.6094 C148.8198,295.2524 143.6198,299.5094 136.0198,301.3824 " fill="none" id="RCVDATA-to-RCVDATA" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="131.0028,302.2394,140.5483,304.665,135.9313,301.3965,139.1997,296.7795,131.0028,302.2394" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="154.8198" y="276.6792">BYTE -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="88" x="170.8198" y="293.6528">addByte(it)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="154.8198" y="310.6265">}</text><!--MD5=[64f6cabce6aefa4b6bef31bef7cb6dd4]
link RCVDATA to RCVPCKT--><path d="M130.9778,285.5194 C198.0188,281.3454 323.6808,269.6434 355.3198,239.6094 C372.5768,223.2274 377.4598,196.1064 378.3858,175.1954 " fill="none" id="RCVDATA-to-RCVPCKT" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="378.5408,170.0224,374.2726,178.8983,378.3908,175.0201,382.269,179.1383,378.5408,170.0224" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="320" x="378.3198" y="201.6792">CTRL [it == CharacterConstants.ETX] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="80" x="394.3198" y="218.6528">endField()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="378.3198" y="235.6265">}</text><!--MD5=[754e15d195ce548844ee58ef62ee6881]
link RCVDATA to RCVESC--><path d="M57.0646,313.6164 C50.2718,320.5474 44.018,328.6814 40.3198,337.6094 C28.5842,365.9414 27.6478,378.6834 40.3198,406.6094 C42.6319,411.7044 45.9014,416.4254 49.6603,420.7194 " fill="none" id="RCVDATA-to-RCVESC" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="53.2364,424.5424,50.0093,415.2372,49.8207,420.8909,44.167,420.7024,53.2364,424.5424" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24" x="41.3198" y="377.1792">ESC</text><!--MD5=[86c8456afa178ad3eb8ff5de0cac72b7]
link RCVESC to RCVDATA--><path d="M88.3198,424.4944 C88.3198,396.1764 88.3198,349.2244 88.3198,318.8554 " fill="none" id="RCVESC-to-RCVDATA" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="88.3198,313.7584,84.3198,322.7584,88.3198,318.7584,92.3198,322.7584,88.3198,313.7584" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="89.3198" y="360.1792">ESC -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="248" x="105.3198" y="377.1528">addByte(CharacterConstants.ESC)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="89.3198" y="394.1265">}</text><!--MD5=[86c8456afa178ad3eb8ff5de0cac72b7]
link RCVESC to RCVDATA--><path d="M126.8968,448.4254 C193.6578,447.1974 326.3888,440.4464 355.3198,406.6094 C375.2488,383.3004 374.9928,361.1344 355.3198,337.6094 C327.9348,304.8624 205.4528,294.4244 136.2838,291.1204 " fill="none" id="RCVESC-to-RCVDATA-1" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="130.9888,290.8764,139.7941,295.2886,135.9834,291.1078,140.1643,287.2971,130.9888,290.8764" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="371.3198" y="360.1792">CTRL -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="88" x="387.3198" y="377.1528">addByte(it)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="371.3198" y="394.1265">}</text><!--MD5=[ef53d8997df390aa77945a8e4dc9b41a]
link RCVCHK to RCVCHK--><path d="M761.8258,274.8774 C772.0838,275.7214 779.8198,280.2984 779.8198,288.6094 C779.8198,295.4914 774.5148,299.8134 766.8648,301.5754 " fill="none" id="RCVCHK-to-RCVCHK" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="761.8258,302.3414,771.3246,304.9437,766.769,301.5901,770.1226,297.0345,761.8258,302.3414" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="785.8198" y="276.6792">BYTE -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="801.8198" y="293.6528">addChecksum(it)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="785.8198" y="310.6265">}</text><!--MD5=[713e34e975cc9ece7234860ca6efebe2]
link RCVCHK to RCVCHKESC--><path d="M682.5548,289.2274 C645.0268,291.2614 590.5698,300.9184 563.3198,337.6094 C545.0348,362.2284 550.6478,378.6834 563.3198,406.6094 C565.6318,411.7044 568.9018,416.4254 572.6598,420.7194 " fill="none" id="RCVCHK-to-RCVCHKESC" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="576.2368,424.5424,573.0097,415.2372,572.8211,420.8909,567.1674,420.7024,576.2368,424.5424" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24" x="564.3198" y="377.1792">ESC</text><!--MD5=[ca3ef35f4d7ec009fd43d62c7b92c8b2]
link RCVCHK to CHKSUM--><path d="M761.8248,288.9174 C850.9508,288.1994 1063.8988,291.4844 1115.3188,337.6094 C1137.8788,357.8434 1142.7588,393.5794 1143.0288,419.0364 " fill="none" id="RCVCHK-to-CHKSUM" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="1143.0188,424.3034,1147.0291,415.308,1143.0245,419.3034,1139.0291,415.2988,1143.0188,424.3034" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="320" x="1144.3188" y="360.1792">CTRL [it == CharacterConstants.EOT] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="80" x="1160.3188" y="377.1528">checksum()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="1144.3188" y="394.1265">}</text><!--MD5=[00429ecdfcda5695b8497d8e825643be]
link CHKSUM to *end*PacketReaderFSM--><path d="M1100.0388,450.2674 C1066.6788,452.4584 1021.5778,461.5374 998.3198,492.6094 C984.4708,511.1113 983.5718,526.8158 998.3198,544.6094 C1014.3988,564.0089 1092.2288,569.5691 1125.8288,571.0789 " fill="none" id="CHKSUM-to-*end*PacketReaderFSM" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="1131.1988,571.3022,1122.366,566.9453,1126.2028,571.1022,1122.046,574.9389,1131.1988,571.3022" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="264" x="999.3198" y="506.6792">«automatic» [!checksumValid] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="80" x="1015.3198" y="523.6528">sendNACK()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="999.3198" y="540.6265">}</text><!--MD5=[00429ecdfcda5695b8497d8e825643be]
link CHKSUM to *end*PacketReaderFSM--><path d="M1182.5788,452.7954 C1210.6288,456.6904 1245.8788,466.8224 1264.3188,492.6094 C1277.7688,511.4073 1278.8088,526.6005 1264.3188,544.6094 C1250.9688,561.2086 1186.6688,568.1818 1156.7288,570.5655 " fill="none" id="CHKSUM-to-*end*PacketReaderFSM-1" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="1151.5588,570.9585,1160.8311,574.2788,1156.545,570.587,1160.2367,566.3009,1151.5588,570.9585" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="256" x="1275.3188" y="506.6792">«automatic» [checksumValid] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="1291.3188" y="523.6528">sendACK()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="1275.3188" y="540.6265">}</text><!--MD5=[e1894b59b8980ef59ebd1ec82b6cd986]
link RCVCHKESC to RCVCHK--><path d="M604.4618,424.3394 C599.1748,400.2594 595.3138,363.3304 612.3198,337.6094 C626.9098,315.5414 654.0868,303.5554 677.7748,297.0804 " fill="none" id="RCVCHKESC-to-RCVCHK" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="682.7708,295.7804,673.0537,294.1748,677.9318,297.0391,675.0676,301.9172,682.7708,295.7804" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="613.3198" y="360.1792">ESC -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="280" x="629.3198" y="377.1528">addChecksum(CharacterConstants.ESC)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="613.3198" y="394.1265">}</text><!--MD5=[e1894b59b8980ef59ebd1ec82b6cd986]
link RCVCHKESC to RCVCHK--><path d="M664.9378,449.1284 C742.2368,448.5994 879.1528,442.4604 910.3198,406.6094 C930.4398,383.4654 929.1318,361.8284 910.3198,337.6094 C892.8888,315.1684 816.7858,301.4594 766.9108,294.7184 " fill="none" id="RCVCHKESC-to-RCVCHK-1" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="761.8688,294.0494,770.2636,299.1998,766.8253,294.7079,771.3172,291.2695,761.8688,294.0494" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="926.3198" y="351.6792">CTRL -&gt; {byte-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="168" x="942.3198" y="368.6528">require(byte != null)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="136" x="942.3198" y="385.6265">addChecksum(byte)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="926.3198" y="402.6001">}</text><!--MD5=[cf33ec619b2f18cdedc346411d9d0d89]
@startuml
skinparam monochrome true
skinparam StateFontName Helvetica
skinparam defaultFontName Monospaced
skinparam defaultFontStyle Bold
skinparam state {
    FontStyle Bold
}
state PacketReaderFSM {
[*] - -> RCVPCKT : CTRL [it == CharacterConstants.SOH]
RCVPCKT - -> RCVDATA : CTRL [it == CharacterConstants.STX] -> {\l  addField()\l}
RCVPCKT - -> RCVCHK : BYTE -> {\l  addChecksum(it)\l}
RCVDATA - -> RCVDATA : BYTE -> {\l  addByte(it)\l}
RCVDATA - -> RCVPCKT : CTRL [it == CharacterConstants.ETX] -> {\l  endField()\l}
RCVDATA - -> RCVESC : ESC
RCVESC - -> RCVDATA : ESC -> {\l  addByte(CharacterConstants.ESC)\l}
RCVESC - -> RCVDATA : CTRL -> {\l  addByte(it)\l}
RCVCHK - -> RCVCHK : BYTE -> {\l  addChecksum(it)\l}
RCVCHK - -> RCVCHKESC : ESC
RCVCHK - -> CHKSUM : CTRL [it == CharacterConstants.EOT] -> {\l  checksum()\l}
CHKSUM - -> [*] : <<automatic>> [!checksumValid] -> {\l  sendNACK()\l}
CHKSUM - -> [*] : <<automatic>> [checksumValid] -> {\l  sendACK()\l}
RCVCHKESC - -> RCVCHK : ESC -> {\l  addChecksum(CharacterConstants.ESC)\l}
RCVCHKESC - -> RCVCHK : CTRL -> {byte->\l  require(byte != null)\l  addChecksum(byte)\l}
}
@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CAT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: ZA
--></g></svg>