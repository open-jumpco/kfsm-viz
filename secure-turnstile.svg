<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="445px" preserveAspectRatio="none" style="width:1289px;height:445px;background:#FFFFFF;" version="1.1" viewBox="0 0 1289 445" width="1289px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ujmhjoczites" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F8F8F8" filter="url(#f1ujmhjoczites)" height="426.4248" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="1270.2354" x="7" y="7"/><rect fill="#FFFFFF" height="392.8154" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="1264.2354" x="10" y="37.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="7" x2="1277.2354" y1="34.6094" y2="34.6094"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="143" x="570.6177" y="26.5332">SecureTurnstileFSM</text><ellipse cx="271.2354" cy="55.6094" fill="#000000" filter="url(#f1ujmhjoczites)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><g id="SecureTurnstileFSM.UNLOCKED"><rect fill="#F8F8F8" filter="url(#f1ujmhjoczites)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="98" x="222.2354" y="102.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="222.2354" x2="320.2354" y1="130.2188" y2="130.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="232.2354" y="122.1426">UNLOCKED</text></g><g id="SecureTurnstileFSM.LOCKED"><rect fill="#F8F8F8" filter="url(#f1ujmhjoczites)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="78" x="232.2354" y="331.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="232.2354" x2="310.2354" y1="359.2188" y2="359.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="58" x="242.2354" y="351.1426">LOCKED</text></g><!--MD5=[3f012b33659cea75301beb276eef6189]
link *start*SecureTurnstileFSM to UNLOCKED--><path d="M271.2354,65.7604 C271.2354,73.7954 271.2354,85.9354 271.2354,97.2634 " fill="none" id="*start*SecureTurnstileFSM-to-UNLOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="271.2354,102.3934,275.2354,93.3934,271.2354,97.3934,267.2354,93.3934,271.2354,102.3934" style="stroke:#383838;stroke-width:1.0;"/><!--MD5=[5d767a4319f708ea6a1e1270c7244025]
link LOCKED to LOCKED--><path d="M310.3974,348.3208 C320.5674,348.8303 328.2354,351.5931 328.2354,356.6094 C328.2354,360.7635 322.9764,363.3722 315.3934,364.4356 " fill="none" id="LOCKED-to-LOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="310.3974,364.898,319.7272,368.053,315.3762,364.438,318.9912,360.0869,310.3974,364.898" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="334.2354" y="319.1792">CARD [cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="350.2354" y="336.1528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="312" x="350.2354" y="353.1265">isOverrideCard(cardId)&amp;&amp;overrideActive;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="334.2354" y="370.1001">] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="350.2354" y="387.0737">cancelOverride()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="334.2354" y="404.0474">}</text><!--MD5=[5d767a4319f708ea6a1e1270c7244025]
link LOCKED to LOCKED--><path d="M310.5094,347.1592 C411.9164,334.9209 668.2354,338.071 668.2354,356.6094 C668.2354,374.84 420.3564,378.1891 315.6854,366.6564 " fill="none" id="LOCKED-to-LOCKED-1" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="310.5094,366.0596,318.9919,371.0644,315.4765,366.6324,319.9084,363.1171,310.5094,366.0596" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="674.2354" y="319.1792">CARD [cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="690.2354" y="336.1528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="690.2354" y="353.1265">isOverrideCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="674.2354" y="370.1001">] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="690.2354" y="387.0737">activateOverride()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="674.2354" y="404.0474">}</text><!--MD5=[c03bbcbe1ea2187b5aae6c6faf6bf9ae]
link LOCKED to UNLOCKED--><path d="M302.4184,331.5276 C318.8384,316.8084 337.3654,296.4494 346.2354,273.6094 C362.8074,230.9364 369.3834,210.1034 346.2354,170.6094 C341.0474,161.7574 333.2364,154.6314 324.5864,148.9424 " fill="none" id="LOCKED-to-UNLOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="320.2804,146.2634,325.8092,154.414,324.5258,148.9046,330.0352,147.6213,320.2804,146.2634" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="361.2354" y="184.6792">CARD [cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="377.2354" y="201.6528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="288" x="377.2354" y="218.6265">overrideActive||isValidCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="361.2354" y="235.6001">] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="377.2354" y="252.5737">unlock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="361.2354" y="269.5474">}</text><!--MD5=[5d767a4319f708ea6a1e1270c7244025]
link LOCKED to LOCKED--><path d="M310.3564,344.9625 C446.5494,323.709 880.2354,327.5913 880.2354,356.6094 C880.2354,385.2591 457.4914,389.4071 315.6864,369.0536 " fill="none" id="LOCKED-to-LOCKED-2" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="310.3564,368.2563,318.6653,373.5442,315.3013,368.9963,319.8493,365.6323,310.3564,368.2563" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="886.2354" y="310.6792">CARD [cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="360" x="902.2354" y="327.6528">requireNotNull(cardId){"cardId is required"};</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="168" x="902.2354" y="344.6265">!isValidCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="886.2354" y="361.6001">] -&gt; {cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="176" x="902.2354" y="378.5737">requireNotNull(cardId)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152" x="902.2354" y="395.5474">invalidCard(cardId)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="886.2354" y="412.521">}</text><!--MD5=[33c2fb760a7074ec24359010ff9693f6]
link UNLOCKED to LOCKED--><path d="M221.9874,130.7344 C162.8854,134.4374 68.9979,144.3874 47.2353,170.6094 C18,205.8354 21.0131,236.0864 47.2353,273.6094 C87.7961,331.6506 174.1014,348.7397 226.9514,353.689 " fill="none" id="UNLOCKED-to-LOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="231.9584,354.131,223.3453,349.3545,226.9778,353.691,222.6413,357.3235,231.9584,354.131" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="48.2353" y="184.6792">CARD [cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="64.2353" y="201.6528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="64.2353" y="218.6265">isOverrideCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="48.2353" y="235.6001">] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="64.2353" y="252.5737">lock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="48.2353" y="269.5474">}</text><!--MD5=[33c2fb760a7074ec24359010ff9693f6]
link UNLOCKED to LOCKED--><path d="M269.1964,153.0234 C268.7964,158.7864 268.4384,164.9114 268.2354,170.6094 C266.2764,225.5314 268.2754,289.6704 269.8174,326.1777 " fill="none" id="UNLOCKED-to-LOCKED-1" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="270.0414,331.3591,273.6493,322.1949,269.8257,326.3637,265.6568,322.5401,270.0414,331.3591" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="269.2354" y="210.1792">PASS -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="285.2354" y="227.1528">lock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="269.2354" y="244.1265">}</text><!--MD5=[6a039ffb45c735ae99fad5b9e6729aad]
@startuml
skinparam monochrome true
skinparam StateFontName Helvetica
skinparam defaultFontName Monospaced
skinparam defaultFontStyle Bold
skinparam state {
    FontStyle Bold
}
state SecureTurnstileFSM {
[*] - -> UNLOCKED
LOCKED - -> LOCKED : CARD [cardId->\l  requireNotNull(cardId);\l  isOverrideCard(cardId)&&overrideActive;\l] -> {\l  cancelOverride()\l}
LOCKED - -> LOCKED : CARD [cardId->\l  requireNotNull(cardId);\l  isOverrideCard(cardId);\l] -> {\l  activateOverride()\l}
LOCKED - -> UNLOCKED : CARD [cardId->\l  requireNotNull(cardId);\l  overrideActive||isValidCard(cardId);\l] -> {\l  unlock()\l}
LOCKED - -> LOCKED : CARD [cardId->\l  requireNotNull(cardId){"cardId is required"};\l  !isValidCard(cardId);\l] -> {cardId->\l  requireNotNull(cardId)\l  invalidCard(cardId)\l}
UNLOCKED - -> LOCKED : CARD [cardId->\l  requireNotNull(cardId);\l  isOverrideCard(cardId);\l] -> {\l  lock()\l}
UNLOCKED - -> LOCKED : PASS -> {\l  lock()\l}
}
@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CAT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: ZA
--></g></svg>