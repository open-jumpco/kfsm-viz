<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="394px" preserveAspectRatio="none" style="width:1394px;height:394px;background:#FFFFFF;" version="1.1" viewBox="0 0 1394 394" width="1394px" zoomAndPan="magnify"><defs><filter height="300%" id="fx9zk39w15xqo" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F8F8F8" filter="url(#fx9zk39w15xqo)" height="375.6094" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="1375.2446" x="7" y="7"/><rect fill="#FFFFFF" height="342" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="1369.2446" x="10" y="37.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="7" x2="1382.2446" y1="34.6094" y2="34.6094"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="143" x="623.1223" y="26.5332">SecureTurnstileFSM</text><g id="SecureTurnstileFSM.LOCKED"><rect fill="#F8F8F8" filter="url(#fx9zk39w15xqo)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="78" x="337.2446" y="85.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="337.2446" x2="415.2446" y1="113.2188" y2="113.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="58" x="347.2446" y="105.1426">LOCKED</text></g><g id="SecureTurnstileFSM.UNLOCKED"><rect fill="#F8F8F8" filter="url(#fx9zk39w15xqo)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="98" x="327.2446" y="314.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="327.2446" x2="425.2446" y1="342.2188" y2="342.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="337.2446" y="334.1426">UNLOCKED</text></g><!--MD5=[5d767a4319f708ea6a1e1270c7244025]
link LOCKED to LOCKED--><path d="M415.4066,102.3204 C425.5756,102.8304 433.2446,105.5934 433.2446,110.6094 C433.2446,114.7634 427.9856,117.3724 420.4026,118.4354 " fill="none" id="LOCKED-to-LOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="415.4066,118.8984,424.7374,122.0507,420.3853,118.4369,423.9991,114.0849,415.4066,118.8984" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="439.2446" y="73.1792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="455.2446" y="90.1528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="312" x="455.2446" y="107.1265">isOverrideCard(cardId)&amp;&amp;overrideActive;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="439.2446" y="124.1001">}] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="455.2446" y="141.0737">cancelOverride()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="439.2446" y="158.0474">}</text><!--MD5=[5d767a4319f708ea6a1e1270c7244025]
link LOCKED to LOCKED--><path d="M415.5186,101.1594 C516.9256,88.9214 773.2446,92.0714 773.2446,110.6094 C773.2446,128.8404 525.3656,132.1894 420.6946,120.6564 " fill="none" id="LOCKED-to-LOCKED-1" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="415.5186,120.0594,424.0011,125.0642,420.4857,120.6322,424.9176,117.1168,415.5186,120.0594" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="779.2446" y="73.1792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="795.2446" y="90.1528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="795.2446" y="107.1265">isOverrideCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="779.2446" y="124.1001">}] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="795.2446" y="141.0737">activateOverride()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="779.2446" y="158.0474">}</text><!--MD5=[c03bbcbe1ea2187b5aae6c6faf6bf9ae]
link LOCKED to UNLOCKED--><path d="M337.0766,115.4724 C257.9916,124.1674 83.735,148.1534 48.2443,193.6094 C20.0721,229.6914 18,262.2454 48.2443,296.6094 C66.0017,316.7856 233.2996,329.9183 321.8516,335.5158 " fill="none" id="LOCKED-to-UNLOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="327.0486,335.8413,318.3165,331.286,322.0584,335.5284,317.816,339.2703,327.0486,335.8413" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="49.2443" y="207.6792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="65.2443" y="224.6528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="288" x="65.2443" y="241.6265">overrideActive||isValidCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="49.2443" y="258.6001">}] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="65.2443" y="275.5737">unlock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="49.2443" y="292.5474">}</text><!--MD5=[5d767a4319f708ea6a1e1270c7244025]
link LOCKED to LOCKED--><path d="M415.3656,98.9624 C551.5586,77.7094 985.2446,81.5914 985.2446,110.6094 C985.2446,139.2594 562.5006,143.4074 420.6946,123.0534 " fill="none" id="LOCKED-to-LOCKED-2" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="415.3656,122.2564,423.6746,127.5441,420.3106,122.9963,424.8584,119.6322,415.3656,122.2564" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="991.2446" y="64.6792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="360" x="1007.2446" y="81.6528">requireNotNull(cardId){"cardId is required"};</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="168" x="1007.2446" y="98.6265">!isValidCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="991.2446" y="115.6001">}] -&gt; {cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="176" x="1007.2446" y="132.5737">requireNotNull(cardId)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152" x="1007.2446" y="149.5474">invalidCard(cardId)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="991.2446" y="166.521">}</text><!--MD5=[33c2fb760a7074ec24359010ff9693f6]
link UNLOCKED to LOCKED--><path d="M376.2446,314.4911 C376.2446,272.5439 376.2446,186.3064 376.2446,140.9584 " fill="none" id="UNLOCKED-to-LOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="376.2446,135.9024,372.2446,144.9024,376.2446,140.9024,380.2446,144.9024,376.2446,135.9024" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="377.2446" y="207.6792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="393.2446" y="224.6528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="393.2446" y="241.6265">isOverrideCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="377.2446" y="258.6001">}] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="393.2446" y="275.5737">lock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="377.2446" y="292.5474">}</text><!--MD5=[33c2fb760a7074ec24359010ff9693f6]
link UNLOCKED to LOCKED--><path d="M425.4286,335.4014 C479.1806,330.7497 560.2126,319.982 579.2446,296.6094 C608.1496,261.1114 604.8446,231.5604 579.2446,193.6094 C543.9696,141.3164 469.1216,122.3624 420.8306,115.4984 " fill="none" id="UNLOCKED-to-LOCKED-1" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="415.6606,114.7954,424.039,119.9726,420.6149,115.4697,425.1178,112.0456,415.6606,114.7954" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="600.2446" y="233.1792">PASS -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="616.2446" y="250.1528">lock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="600.2446" y="267.1265">}</text><!--MD5=[e52c8abc979e10f51ca7decc77e8c140]
@startuml
skinparam monochrome true
skinparam StateFontName Helvetica
skinparam defaultFontName Monospaced
skinparam defaultFontStyle Bold
skinparam state {
    FontStyle Bold
}
state SecureTurnstileFSM {
LOCKED - -> LOCKED : CARD [{cardId->\l  requireNotNull(cardId);\l  isOverrideCard(cardId)&&overrideActive;\l}] -> {\l  cancelOverride()\l}
LOCKED - -> LOCKED : CARD [{cardId->\l  requireNotNull(cardId);\l  isOverrideCard(cardId);\l}] -> {\l  activateOverride()\l}
LOCKED - -> UNLOCKED : CARD [{cardId->\l  requireNotNull(cardId);\l  overrideActive||isValidCard(cardId);\l}] -> {\l  unlock()\l}
LOCKED - -> LOCKED : CARD [{cardId->\l  requireNotNull(cardId){"cardId is required"};\l  !isValidCard(cardId);\l}] -> {cardId->\l  requireNotNull(cardId)\l  invalidCard(cardId)\l}
UNLOCKED - -> LOCKED : CARD [{cardId->\l  requireNotNull(cardId);\l  isOverrideCard(cardId);\l}] -> {\l  lock()\l}
UNLOCKED - -> LOCKED : PASS -> {\l  lock()\l}
}
@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CAT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: ZA
--></g></svg>